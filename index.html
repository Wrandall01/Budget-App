
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Suivi de Budget</title>

  <!-- Styles optionnels -->
  styles.css

  <!-- PWA (facultatif) -->
  <link rel="manifest" href="manifestolor" content="#0ea5e9" />
</head>
<body>
  <header class="app-header">
    <h1>Suivi de Budget</h1>
    <div class="period-picker">
      <!-- Select année (injecté/actualisé par script.js) -->
      <!-- Le code crée #yearSelect dynamiquement -->
      <label for="periodSelect">Période :</label>
      <select id="periodSelect" aria-label="Mois"></select>
      <span id="authStatus" class="status-chip">Hors ligne</span>
    </div>
  </header>

  <main>
    <!-- Actions -->
    <section class="actions">
      <button id="addCategoryBtn" class="btn btn-primary">＋ Catégorie</button>
      <button id="addExpenseBtn" class="btn btn-secondary">＋ Dépense</button>
    </section>

    <!-- Catégories mensuelles -->
    <section class="section">
      <h2>Catégories mensuelles</h2>
      <div id="monthlySummary"></div>
    </section>

    <!-- Budget global mensuel -->
    <section class="section">
      <h2>Budget global mensuel</h2>
      <div id="globalCards" class="cards"></div>
      <div id="globalChart"></div>
    </section>

    <!-- Catégories annuelles -->
    <section class="section">
      <h2>Catégories annuelles</h2>
      <div id="annualSummary"></div>
    </section>

    <!-- Diagrammes par catégorie mensuelle -->
    <section class="section">
      <h2>Diagrammes par catégorie mensuelle</h2>
      <div id="monthlyMiniCharts" class="mini-charts"></div>
    </section>
  </main>

  <!-- Toast / notifications brèves -->
  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <!-- ====================== Modales ====================== -->

  <!-- Modal : Créer une catégorie -->
  <div id="modalCategory" class="modal hidden" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalCategoryTitle">
      <h3 id="modalCategoryTitle">Créer une catégorie</h3>
      <form id="categoryForm">
        <div class="form-row">
          <label for="catName">Intitulé</label>
          <input id="catName" type="text" placeholder="Ex: Logement" required />
        </div>
        <div class="form-row">
          <label for="catBudget">Budget (€)</label>
          <input id="catBudget" type="number" step="0.01" min="0" placeholder="0.00" required />
        </div>
        <div class="form-row">
          <label for="catType">Type</label>
          <select id="catType" required>
            <option value="mensuel">Mensuel</option>
            <option value="annuel">Annuel</option>
          </select>
        </div>
        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">Valider</button>
          <button type="button" class="btn btn-ghost" data-close="#modalCategory">Annuler</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal : Ajouter une dépense -->
  <div id="modalExpense" class="modal hidden" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalExpenseTitle">
      <h3 id="modalExpenseTitle">Ajouter une dépense</h3>
      <form id="expenseForm">
        <div class="form-row">
          <label for="expDate">Date</label>
          <input id="expDate" type="date" required />
        </div>
        <div class="form-row">
          <label for="expCategory">Catégorie</label>
          <select id="expCategory" required></select>
        </div>
        <div class="form-row">
          <label for="expName">Intitulé</label>
          <input id="expName" type="text" required />
        </div>
        <div class="form-row">
          <label for="expAmount">Montant (€)</label>
          <input id="expAmount" type="number" step="0.01" min="0" required />
        </div>
        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">Imputer</button>
          <button type="button" class="btn btn-ghost" data-close="#modalExpense">Annuler</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal : Connexion -->
  <div id="modalAuth" class="modal hidden" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalAuthTitle">
      <h3 id="modalAuthTitle">Connexion</h3>
      <form id="authForm">
        <div class="form-row">
          <label for="authEmail">Email</label>
          <input id="authEmail" type="email" autocomplete="username" required />
        </div>
        <div class="form-row">
          <label for="authPass">Mot de passe</label>
          <input id="authPass" type="password" autocomplete="current-password" required />
        </div>
        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">Se connecter</button>
          <button type="button" id="authCreate" class="btn btn-secondary">Créer le compte</button>
          <button type="button" class="btn btn-ghost" data-close="#modalAuth">Fermer</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ====================== Scripts ====================== -->

  <!-- ⚠️ Ordre d'inclusion : Firebase d'abord (expose window._fb), puis ton app -->
  firebase-bootstrap.js</script>
  script.js</script>

  <!-- (Optionnel) Service Worker d’app — seulement si tu en as un et que tu veux PWA -->
  <!--
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', async () => {
        try {
          await navigator.serviceWorker.register('/service-worker.js');
          console.log('Service Worker enregistré');
        } catch (e) {
          console.error('SW échec:', e);
        }
      });
    }
  </script>
  -->
</body>
</html>
